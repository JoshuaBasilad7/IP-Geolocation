{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\joshu\\\\OneDrive\\\\Desktop\\\\ip-geo-challenge-pro\\\\ip-geo-web\\\\src\\\\Home.jsx\",\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport markerIcon2x from \"leaflet/dist/images/marker-icon-2x.png\";\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IPV4_REGEX = /^(25[0-5]|2[0-4]\\d|1?\\d{1,2})(\\.(25[0-5]|2[0-4]\\d|1?\\d{1,2})){3}$/;\nconst IPV6_REGEX = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;\nexport default function Home({\n  api,\n  user,\n  onLogout\n}) {\n  _s2();\n  var _s = $RefreshSig$();\n  const [geo, setGeo] = useState(null);\n  const [query, setQuery] = useState(\"\");\n  const [history, setHistory] = useState([]);\n  const [selected, setSelected] = useState({});\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    loadCurrent();\n    fetchHistory();\n  }, []);\n\n  // Fix missing default icon\n  delete L.Icon.Default.prototype._getIconUrl;\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: markerIcon2x,\n    iconUrl: markerIcon,\n    shadowUrl: markerShadow\n  });\n  function RecenterMap({\n    lat,\n    lng\n  }) {\n    _s();\n    const map = useMap();\n    useEffect(() => {\n      if (lat && lng) {\n        map.setView([lat, lng]);\n      }\n    }, [lat, lng]);\n    return null;\n  }\n  _s(RecenterMap, \"IoceErwr5KVGS9kN4RQ1bOkYMAg=\", false, function () {\n    return [useMap];\n  });\n  async function loadCurrent() {\n    try {\n      setLoading(true);\n      const res = await axios.get(api + \"/api/geo\");\n      setGeo(res.data);\n    } catch {\n      setError(\"Failed to load geo\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  async function fetchHistory() {\n    try {\n      const res = await axios.get(api + \"/api/history\");\n      setHistory(res.data.history || []);\n    } catch {\n      /* ignore */\n    }\n  }\n  const isValidIp = s => IPV4_REGEX.test(s) || IPV6_REGEX.test(s);\n  async function handleSearch(e) {\n    e && e.preventDefault();\n    setError(null);\n    if (!query) return;\n    if (!isValidIp(query)) {\n      setError(\"‚ùå Not a valid IP address\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await axios.get(api + \"/api/geo/\" + query);\n      setGeo(res.data);\n      await axios.post(api + \"/api/history\", {\n        ip: query,\n        data: res.data\n      });\n      fetchHistory();\n    } catch {\n      setError(\"‚ùå Lookup failed\");\n    } finally {\n      setLoading(false);\n    }\n  }\n  function clearSearch() {\n    setQuery(\"\");\n    setError(null);\n    loadCurrent();\n  }\n  function toggleSelect(id) {\n    setSelected(s => ({\n      ...s,\n      [id]: !s[id]\n    }));\n  }\n  async function deleteSelected() {\n    const ids = Object.keys(selected).filter(k => selected[k]);\n    if (ids.length === 0) return;\n    await axios.delete(api + \"/api/history\", {\n      data: {\n        ids\n      }\n    });\n    setSelected({});\n    fetchHistory();\n  }\n  const loc = geo !== null && geo !== void 0 && geo.loc ? geo.loc.split(\",\").map(Number) : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-sky-500 via-indigo-500 to-purple-600 text-gray-800 flex items-center justify-center py-10\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl w-full bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6 border-b pb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-sky-700\",\n          children: \"\\uD83C\\uDF0D IP Geolocation Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-500\",\n            children: [\"Hi, \", user === null || user === void 0 ? void 0 : user.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onLogout,\n            className: \"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm rounded-lg shadow-md\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2 space-y-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSearch,\n            className: \"flex gap-2 bg-white p-3 rounded-lg shadow\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              value: query,\n              onChange: e => setQuery(e.target.value),\n              placeholder: \"Enter IP (e.g. 8.8.8.8)\",\n              className: \"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-400 focus:outline-none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"px-4 py-2 bg-sky-600 text-white rounded-lg hover:opacity-90 transition\",\n              disabled: loading,\n              children: loading ? \"Searching...\" : \"Lookup\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: clearSearch,\n              className: \"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition\",\n              children: \"Clear\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-red-600 bg-red-100 p-2 rounded\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white p-4 rounded-lg shadow\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-sky-700\",\n              children: \"\\uD83D\\uDCCD Current Geolocation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), geo ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm bg-gray-50 p-3 rounded overflow-auto max-h-60\",\n              children: /*#__PURE__*/_jsxDEV(\"pre\", {\n                children: JSON.stringify(geo, null, 2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-gray-500\",\n              children: \"Loading...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white p-4 rounded-lg shadow\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-sky-700\",\n              children: \"\\uD83D\\uDDFA\\uFE0F Map\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), loc ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-3 rounded-lg overflow-hidden h-80\",\n              children: /*#__PURE__*/_jsxDEV(MapContainer, {\n                center: loc,\n                zoom: 8,\n                scrollWheelZoom: false,\n                className: \"h-full w-full\",\n                children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n                  url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Marker, {\n                  position: loc,\n                  children: /*#__PURE__*/_jsxDEV(Popup, {\n                    children: [geo === null || geo === void 0 ? void 0 : geo.city, \", \", geo === null || geo === void 0 ? void 0 : geo.region]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 190,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(RecenterMap, {\n                  lat: loc[0],\n                  lng: loc[1]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-gray-500\",\n              children: \"No coordinates available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"bg-white p-4 rounded-lg shadow\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-lg font-semibold text-sky-700\",\n              children: \"\\uD83D\\uDD52 History\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deleteSelected,\n              className: \"text-sm text-red-600 hover:underline\",\n              children: \"Delete Selected\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-2 max-h-[500px] overflow-auto\",\n            children: [history.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm text-gray-500\",\n              children: \"No history yet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), history.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center p-2 border border-gray-200 rounded hover:bg-sky-50 transition\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: !!selected[item.id],\n                  onChange: () => toggleSelect(item.id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"ml-2 text-sky-600 hover:underline text-sm\",\n                  onClick: () => {\n                    setQuery(item.ip);\n                    handleSearch();\n                  },\n                  children: item.ip\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400\",\n                children: new Date(item.when).toLocaleString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 19\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s2(Home, \"DvM+DXc9UYV1BvSjRRMpbfr+U4M=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","axios","MapContainer","TileLayer","Marker","Popup","useMap","L","markerIcon2x","markerIcon","markerShadow","jsxDEV","_jsxDEV","IPV4_REGEX","IPV6_REGEX","Home","api","user","onLogout","_s2","_s","$RefreshSig$","geo","setGeo","query","setQuery","history","setHistory","selected","setSelected","error","setError","loading","setLoading","loadCurrent","fetchHistory","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","RecenterMap","lat","lng","map","setView","res","get","data","isValidIp","s","test","handleSearch","e","preventDefault","post","ip","clearSearch","toggleSelect","id","deleteSelected","ids","Object","keys","filter","k","length","delete","loc","split","Number","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","onClick","onSubmit","value","onChange","target","placeholder","disabled","type","JSON","stringify","center","zoom","scrollWheelZoom","url","position","city","region","item","checked","Date","when","toLocaleString","_c","$RefreshReg$"],"sources":["C:/Users/joshu/OneDrive/Desktop/ip-geo-challenge-pro/ip-geo-web/src/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport markerIcon2x from \"leaflet/dist/images/marker-icon-2x.png\";\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\n\nconst IPV4_REGEX =\n  /^(25[0-5]|2[0-4]\\d|1?\\d{1,2})(\\.(25[0-5]|2[0-4]\\d|1?\\d{1,2})){3}$/;\nconst IPV6_REGEX = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;\n\nexport default function Home({ api, user, onLogout }) {\n  const [geo, setGeo] = useState(null);\n  const [query, setQuery] = useState(\"\");\n  const [history, setHistory] = useState([]);\n  const [selected, setSelected] = useState({});\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    loadCurrent();\n    fetchHistory();\n  }, []);\n\n  // Fix missing default icon\n  delete L.Icon.Default.prototype._getIconUrl;\n\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: markerIcon2x,\n    iconUrl: markerIcon,\n    shadowUrl: markerShadow,\n  });\n\n  function RecenterMap({ lat, lng }) {\n    const map = useMap();\n    useEffect(() => {\n      if (lat && lng) {\n        map.setView([lat, lng]);\n      }\n    }, [lat, lng]);\n    return null;\n  }\n\n  async function loadCurrent() {\n    try {\n      setLoading(true);\n      const res = await axios.get(api + \"/api/geo\");\n      setGeo(res.data);\n    } catch {\n      setError(\"Failed to load geo\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function fetchHistory() {\n    try {\n      const res = await axios.get(api + \"/api/history\");\n      setHistory(res.data.history || []);\n    } catch {\n      /* ignore */\n    }\n  }\n\n  const isValidIp = (s) => IPV4_REGEX.test(s) || IPV6_REGEX.test(s);\n\n  async function handleSearch(e) {\n    e && e.preventDefault();\n    setError(null);\n    if (!query) return;\n    if (!isValidIp(query)) {\n      setError(\"‚ùå Not a valid IP address\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await axios.get(api + \"/api/geo/\" + query);\n      setGeo(res.data);\n      await axios.post(api + \"/api/history\", { ip: query, data: res.data });\n      fetchHistory();\n    } catch {\n      setError(\"‚ùå Lookup failed\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function clearSearch() {\n    setQuery(\"\");\n    setError(null);\n    loadCurrent();\n  }\n\n  function toggleSelect(id) {\n    setSelected((s) => ({ ...s, [id]: !s[id] }));\n  }\n\n  async function deleteSelected() {\n    const ids = Object.keys(selected).filter((k) => selected[k]);\n    if (ids.length === 0) return;\n    await axios.delete(api + \"/api/history\", { data: { ids } });\n    setSelected({});\n    fetchHistory();\n  }\n\n  const loc = geo?.loc ? geo.loc.split(\",\").map(Number) : null;\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-sky-500 via-indigo-500 to-purple-600 text-gray-800 flex items-center justify-center py-10\">\n      <div className=\"max-w-6xl w-full bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl p-8\">\n        <div className=\"flex justify-between items-center mb-6 border-b pb-3\">\n          <h1 className=\"text-2xl font-bold text-sky-700\">\n            üåç IP Geolocation Dashboard\n          </h1>\n          <div className=\"flex items-center gap-3\">\n            <span className=\"text-sm text-gray-500\">Hi, {user?.name}</span>\n            <button\n              onClick={onLogout}\n              className=\"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm rounded-lg shadow-md\"\n            >\n              Logout\n            </button>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {/* LEFT: Search + Info + Map */}\n          <div className=\"md:col-span-2 space-y-5\">\n            {/* Search */}\n            <form\n              onSubmit={handleSearch}\n              className=\"flex gap-2 bg-white p-3 rounded-lg shadow\"\n            >\n              <input\n                value={query}\n                onChange={(e) => setQuery(e.target.value)}\n                placeholder=\"Enter IP (e.g. 8.8.8.8)\"\n                className=\"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-400 focus:outline-none\"\n              />\n              <button\n                className=\"px-4 py-2 bg-sky-600 text-white rounded-lg hover:opacity-90 transition\"\n                disabled={loading}\n              >\n                {loading ? \"Searching...\" : \"Lookup\"}\n              </button>\n              <button\n                type=\"button\"\n                onClick={clearSearch}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition\"\n              >\n                Clear\n              </button>\n            </form>\n\n            {error && (\n              <div className=\"text-sm text-red-600 bg-red-100 p-2 rounded\">\n                {error}\n              </div>\n            )}\n\n            {/* Geo Info */}\n            <div className=\"bg-white p-4 rounded-lg shadow\">\n              <h3 className=\"text-lg font-semibold text-sky-700\">\n                üìç Current Geolocation\n              </h3>\n              {geo ? (\n                <div className=\"mt-2 text-sm bg-gray-50 p-3 rounded overflow-auto max-h-60\">\n                  <pre>{JSON.stringify(geo, null, 2)}</pre>\n                </div>\n              ) : (\n                <div className=\"mt-2 text-gray-500\">Loading...</div>\n              )}\n            </div>\n\n            {/* Map */}\n            <div className=\"bg-white p-4 rounded-lg shadow\">\n              <h3 className=\"text-lg font-semibold text-sky-700\">üó∫Ô∏è Map</h3>\n              {loc ? (\n                <div className=\"mt-3 rounded-lg overflow-hidden h-80\">\n                  <MapContainer\n                    center={loc}\n                    zoom={8}\n                    scrollWheelZoom={false}\n                    className=\"h-full w-full\"\n                  >\n                    <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n                    <Marker position={loc}>\n                      <Popup>\n                        {geo?.city}, {geo?.region}\n                      </Popup>\n                    </Marker>\n                    <RecenterMap lat={loc[0]} lng={loc[1]} />\n                  </MapContainer>\n                </div>\n              ) : (\n                <div className=\"mt-2 text-gray-500\">\n                  No coordinates available\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* RIGHT: History */}\n          <aside className=\"bg-white p-4 rounded-lg shadow\">\n            <div className=\"flex justify-between items-center mb-3\">\n              <h4 className=\"text-lg font-semibold text-sky-700\">üïí History</h4>\n              <button\n                onClick={deleteSelected}\n                className=\"text-sm text-red-600 hover:underline\"\n              >\n                Delete Selected\n              </button>\n            </div>\n\n            <div className=\"space-y-2 max-h-[500px] overflow-auto\">\n              {history.length === 0 && (\n                <div className=\"text-sm text-gray-500\">No history yet</div>\n              )}\n              {history.map((item) => (\n                <div\n                  key={item.id}\n                  className=\"flex justify-between items-center p-2 border border-gray-200 rounded hover:bg-sky-50 transition\"\n                >\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={!!selected[item.id]}\n                      onChange={() => toggleSelect(item.id)}\n                    />\n                    <button\n                      className=\"ml-2 text-sky-600 hover:underline text-sm\"\n                      onClick={() => {\n                        setQuery(item.ip);\n                        handleSearch();\n                      }}\n                    >\n                      {item.ip}\n                    </button>\n                  </div>\n                  <span className=\"text-xs text-gray-400\">\n                    {new Date(item.when).toLocaleString()}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </aside>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}